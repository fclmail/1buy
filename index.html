<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USDC Deposit on Polygon</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <h2>USDC Deposit</h2>
    <button onclick="connectWallet()">Connect MetaMask</button>
    <p id="walletAddress">Wallet: Not connected</p>

    <label for="amount">Select amount:</label>
    <select id="amount">
        <option value="10000">0.01 USDC</option>  <!-- 0.01 * 10^6 -->
        <option value="1000000">1.0 USDC</option> <!-- 1.0 * 10^6 -->
    </select>
    
    <button onclick="depositUSDC()">Deposit</button>

    <p id="status"></p>

    <script>
        let provider;
        let signer;
        const usdcAddress = "0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"; // Polygon USDC
        const recipient = "0x7114a16E0a396b0B40ee139e8c14FDd3335348eA";

        async function connectWallet() {
            if (window.ethereum) {
                provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                document.getElementById("walletAddress").innerText = "Wallet: " + (await signer.getAddress());
            } else {
                alert("MetaMask not found. Please install it.");
            }
        }

        async function depositUSDC() {
            if (!signer) return alert("Please connect MetaMask first!");

            const usdcContract = new ethers.Contract(
                usdcAddress,
                ["function transfer(address to, uint amount) public returns (bool)"],
                signer
            );

            const amount = document.getElementById("amount").value;

            try {
                document.getElementById("status").innerText = "Sending...";
                const tx = await usdcContract.transfer(recipient, amount);
                await tx.wait();
                document.getElementById("status").innerText = "Deposit Successful! Tx: " + tx.hash;
            } catch (error) {
                document.getElementById("status").innerText = "Error: " + error.message;
            }
        }
    </script>
</body>
</html>
